<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>智能超市终端</title>
        <meta name="keywords" content="index">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="renderer" content="webkit">
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <meta name="toTop" content="true">
        <link rel="icon" type="image/png" href="assets/i/favicon.png">
        <link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">
        <meta name="apple-mobile-web-app-title" content="Amaze UI" />
        <link rel="stylesheet" href="assets/css/amazeui.min.css" />
        <link rel="stylesheet" href="assets/css/admin.css">
        <link rel="stylesheet" href="assets/css/app.css">
        <link rel="stylesheet" href="assets/css/centermenu.css">
        <link rel="stylesheet" href="assets/css/loading.css"/>
		<link rel="stylesheet" href="assets/css/my_cart.css">
        <script src="assets/js/echarts.min.js"></script>
        <style>
            body {
                font-family: 'YouYuan';
            }
            .tpl-page-header-fixed {
                margin-top: 150px;
            }
            .titleBox {
                float:left;
                position:relative;
                left:35%;
                height: 130px;
                line-height: 130px;
            }
            .titleBox p {
                float:left;
                position:relative;
                right:50%;
                color: black;
            }
            .selectBtn {
                background-color: #fff;
                border-radius: 5px;
                width: 250px;
                height: 50px;
                font-size: 22px;
            }
            .returnDiv {
                font-family: Arial,'Times New Roman','Microsoft YaHei',SimHei;
                width: 120px;
                top:20px;
                right:50px;
                position:fixed;
                cursor:pointer;
            }
            .selectType {
                width: 250px;
                height: 50px;
                border-radius: 5px;
                border-color: #e6e6e6;
                padding-left:20px;
                font-size: 22px;
            }
        </style>
    </head>

    <body data-type="index">
        <header class="am-topbar am-topbar-inverse admin-header">
            <div class="am-topbar-brand" style="height: 130px;line-height: 130px;">
                <a href="index.html" class="tpl-logo">
                    <img src="assets/img/logo.png">
                </a>
            </div>

            <div class="titleBox">
                <p class="am-text-xxxl">智能超市终端</p>
            </div>

            <div class="returnDiv">
                <a style="color: black;" href="javascript:history.back(-1)">
                    <span class="am-icon-arrow-left" style="font-size: 30px; margin-top: 10px;"></span>
                    <span style="font-size: 28px;">Return</span>
                </a>
            </div>
        </header>

        <div class="tpl-page-container tpl-page-header-fixed">
            <div class="tpl-portlet-components" style="margin-top: -20px;">
                <!--<div class="am-u-sm-12 am-u-md-3">-->
                    <!--<div class="am-form-group">-->
                        <!--<button id="firstCategoryBtn" class="am-btn am-btn-default selectBtn" onclick="firstCategoryMenu()">选择大类</button>-->
                    <!--</div>-->
                <!--</div>-->
                <div id="city" class="am-u-sm-12 am-u-md-3">
                    <select class="prov selectType">
                        <option>商品分类</option>
                    </select>
                    <select class="city selectType" style="display: none;margin-top: 20px;margin-bottom: 20px;"></select>
                </div>
                <div class="am-u-sm-12 am-u-md-3">
                    <div class="am-form-group">
                        <button id="moneyIntervalBtn" class="am-btn am-btn-default selectBtn" onclick="moneyIntervalMenu()">价格区间</button>
                    </div>
                </div>
                <div class="am-u-sm-12 am-u-md-3">
                    <div class="am-form-group">
                        <button id="priceOrderBtn" class="am-btn am-btn-default selectBtn">
                            价格
                            <span class="am-icon-sort-alpha-asc"></span>
                        </button>
                    </div>
                </div>
                <div class="am-u-sm-12 am-u-md-3">
                    <div class="am-form-group">
                        <button id="salesOrderBtn" class="am-btn am-btn-default selectBtn">
                            销量
                            <span class="am-icon-sort-amount-desc"></span>
                        </button>
                    </div>
                </div>
                <!--<div class="am-u-sm-12 am-u-md-3" style="float: left;">-->
                    <!--<div class="am-form-group">-->
                        <!--<button id="secondCategoryBtn" class="am-btn am-btn-default selectBtn" onclick="scecondCategoryMenu()">选择小类</button>-->
                    <!--</div>-->
                <!--</div>-->

                <hr data-am-widget="divider" style="" class="am-divider am-divider-dotted" />
                <div class="am-u-sm-12 am-u-md-6">
                    <div class="tpl-table-images-content">
                        <a href="javascript:;" class="tpl-table-images-content-i" style="float: left;width: 100px;margin-right: 10px;margin-bottom: 10px;">
                            <img src="assets/img/product01-1.jpeg" style="width: 100px">
                        </a>
                        <div class="tpl-table-images-content-block">
                            <div id="productTitle" class="tpl-i-font" style="margin-top: -12px; font-size: 18px;">
                                1
                            </div>
                            <div id="productSubTitle" class="tpl-i-font" style="padding-left: 10px;font-size: 14px;height: 50px;width: 430px;">
                                夏装圆领韩版修身T恤短袖衫，包邮，白色
                                夏装圆领韩版修身T恤短袖衫，包邮，白色
                                
                            </div>
                            <div id="productPrice" class="tpl-i-font" style="padding-left: 10px;font-size: 18px;color: red;">
                                ￥1
                            </div>
                            <hr style="width: 100%; padding: 0px;" />
                            <div class="tpl-i-more" style="">
                                    <span class="am-text-warning">累计销量：</span>
                                    <span class="am-text-warning"> 100+</span>
                                    <a href="productDetail.html" class="am-btn am-btn-secondary am-round" style="height: 40px;float: right;width: 140px;margin-left: 10px;">
                                        <span class="am-icon-yelp"></span>
                                        查看详情
                                    </a>
                                    <a href="#0" data-id="2" data-price="2" data-img="assets/img/product01-1.jpeg" data-name="1" class="am-btn am-btn-success am-round cd-add-to-cart" style="height: 40px;float: right;width: 140px;">
                                        <span class="am-icon-shopping-cart"></span>
                                        购买
                                    </a>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="am-u-sm-12 am-u-md-6">
                    <div class="tpl-table-images-content">
                        <a href="javascript:;" class="tpl-table-images-content-i" style="float: left;width: 100px;margin-right: 10px;margin-bottom: 10px;">
                            <img src="assets/img/product01-2.jpg" style="width: 100px">
                        </a>
                        <div class="tpl-table-images-content-block">
                            <div id="productTitle" class="tpl-i-font" style="margin-top: -12px; font-size: 18px;">
                                2
                            </div>
                            <div id="productSubTitle" class="tpl-i-font" style="padding-left: 10px;font-size: 14px;height: 50px;width: 430px;">
                                夏装圆领韩版修身T恤短袖衫，包邮，白色
                                夏装圆领韩版修身T恤短袖衫，包邮，白色
                                
                            </div>
                            <div id="productPrice" class="tpl-i-font" style="padding-left: 10px;font-size: 18px;color: red;">
                                ￥2
                            </div>
                            <hr style="width: 100%; padding: 0px;" />
                            <div class="tpl-i-more" style="">
                                    <span class="am-text-warning">累计销量：</span>
                                    <span class="am-text-warning"> 100+</span>
                                    <a class="am-btn am-btn-secondary am-round" style="height: 40px;float: right;width: 140px;margin-left: 10px;">
                                        <span class="am-icon-yelp"></span>
                                        查看详情
                                    </a>
                                    <a href="#0" data-id="3" data-price="3" data-img="assets/img/product01-2.jpg" data-name="2" class="am-btn am-btn-success am-round cd-add-to-cart" style="height: 40px;float: right;width: 140px;">
                                        <span class="am-icon-shopping-cart"></span>
                                        购买
                                    </a>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="am-u-sm-12 am-u-md-6">
                    <div class="tpl-table-images-content">
                        <a href="javascript:;" class="tpl-table-images-content-i" style="float: left;width: 100px;margin-right: 10px;margin-bottom: 10px;">
                            <img src="assets/img/product01-3.jpg" style="width: 100px">
                        </a>
                        <div class="tpl-table-images-content-block">
                            <div id="productTitle" class="tpl-i-font" style="margin-top: -12px; font-size: 18px;">
                                3
                            </div>
                            <div id="productSubTitle" class="tpl-i-font" style="padding-left: 10px;font-size: 14px;height: 50px;width: 430px;">
                                夏装圆领韩版修身T恤短袖衫，包邮，白色
                                夏装圆领韩版修身T恤短袖衫，包邮，白色
                                
                            </div>
                            <div id="productPrice" class="tpl-i-font" style="padding-left: 10px;font-size: 18px;color: red;">
                                ￥3
                            </div>
                            <hr style="width: 100%; padding: 0px;" />
                            <div class="tpl-i-more" style="">
                                    <span class="am-text-warning">累计销量：</span>
                                    <span class="am-text-warning"> 100+</span>
                                    <a class="am-btn am-btn-secondary am-round" style="height: 40px;float: right;width: 140px;margin-left: 10px;">
                                        <span class="am-icon-yelp"></span>
                                        查看详情
                                    </a>
                                    <a href="#0" data-id="6" data-price="6" data-img="assets/img/product01-3.jpg" data-name="3" class="am-btn am-btn-success am-round cd-add-to-cart" style="height: 40px;float: right;width: 140px;">
                                        <span class="am-icon-shopping-cart"></span>
                                        购买
                                    </a>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="am-u-sm-12 am-u-md-6">
                    <div class="tpl-table-images-content">
                        <a href="javascript:;" class="tpl-table-images-content-i" style="float: left;width: 100px;margin-right: 10px;margin-bottom: 10px;">
                            <img src="assets/img/product01-4.jpg" style="width: 100px">
                        </a>
                        <div class="tpl-table-images-content-block">
                            <div id="productTitle" class="tpl-i-font" style="margin-top: -12px; font-size: 18px;">
                                4
                            </div>
                            <div id="productSubTitle" class="tpl-i-font" style="padding-left: 10px;font-size: 14px;height: 50px;width: 430px;">
                                夏装圆领韩版修身T恤短袖衫，包邮，白色
                                夏装圆领韩版修身T恤短袖衫，包邮，白色
                                
                            </div>
                            <div id="productPrice" class="tpl-i-font" style="padding-left: 10px;font-size: 18px;color: red;">
                                ￥4
                            </div>
                            <hr style="width: 100%; padding: 0px;" />
                            <div class="tpl-i-more" style="">
                                    <span class="am-text-warning">累计销量：</span>
                                    <span class="am-text-warning"> 100+</span>
                                    <a class="am-btn am-btn-secondary am-round" style="height: 40px;float: right;width: 140px;margin-left: 10px;">
                                        <span class="am-icon-yelp"></span>
                                        查看详情
                                    </a>
                                    <a href="#0" data-id="7" data-price="7" data-img="assets/img/product01-4.jpg" data-name="4" class="am-btn am-btn-success am-round cd-add-to-cart" style="height: 40px;float: right;width: 140px;">
                                        <span class="am-icon-shopping-cart"></span>
                                        购买
                                    </a>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!--购物车-->
				<div class="cd-cart-container empty">
					<a href="#0" class="cd-cart-trigger">
						Cart
						<ul class="count"> <!-- cart items count -->
							<li>0</li>
							<li>0</li>
						</ul> <!-- .count -->
					</a>
					
					<div class="cd-cart">
						<div class="wrapper">
                            <header style="height: 70px; line-height: 70px">
                                <h2 style="font-size: 24px;">购物车</h2>
                                <span class="undo" style="font-size: 22px;"><a href="#0">撤回</a></span>
                            </header>
							
							<div class="body">
								<ul>
									<!-- products added to the cart will be inserted here using JavaScript -->
								</ul>
							</div>

                            <footer style="width:100%">
                                <a id="clearCart" style="line-height: 72px; height: 72px;float: left;text-align: center;display: block;width: 20%;
    background-color: red;" href="#0" class="btn">清空购物车</a>
                                <a style=" width: 85%;
    display: block;" href="#0" class="checkout btn settle-account"><em>结算 - ￥<span>0</span></em></a>
                            </footer>
						</div>
					</div> <!-- .cd-cart -->
				</div> <!-- cd-cart-container -->
                <!--分页-->
                <div class="am-u-lg-12">
                    <div class="am-cf">
                        <div class="am-fr">
                            <ul class="am-pagination tpl-pagination">
                                <li class="am-disabled"><a href="#">«</a></li>
                                <li class="am-active"><a href="#">1</a></li>
                                <li><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">5</a></li>
                                <li><a href="#">»</a></li>
                            </ul>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
        </div>
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/amazeui.min.js"></script>
        <script src="assets/js/toast.js"></script>
        <script src="assets/js/centermenu.js"></script>
        <script src="assets/js/toTop.js"></script>
        <script src="assets/js/jquery.cityselect.js"></script>
        <script src="assets/js/jquery.cookie.js"></script>
		<!--<script src="assets/js/my_cart.js"></script>-->
        <script>
            var progress = $.AMUI.progress;

            // 购物车相关变量
            var cartWrapper = $('.cd-cart-container');
            var cartBody = cartWrapper.find('.body')
            var cartList = cartBody.find('ul').eq(0);
            var cartTotal = cartWrapper.find('.checkout').find('span');
            var cartTrigger = cartWrapper.children('.cd-cart-trigger');
            var cartCount = cartTrigger.children('.count')
            var undo = cartWrapper.find('.undo');
            var settleAccount = cartWrapper.find('.checkout')
            var undoTimeoutId;
            var productId = 0;
            // 存储购物车中的商品
            var cookieCartList = new Array()
            // 用于撤回删除的商品
            var oldCookieCartList = new Array()

            $(function() {
                onLoad();
                bindEvent();
            });
            function onLoad() {
                initPage();
            }
            function initPage() {
                progress.start();
                // 请求后台获取商品类别
                $.ajax({
                    url : '/sys/productType/getProductTypeFe',
                    type : 'POST',
                    dataType:'json',
                    success : function(res) {
                        progress.done();

                        // 数据组装
                        var keyList = Object.keys(res)
                        var citylist = []
                        for(key in res){
                            var item = res[key]
                            citylist.push({
                                "p":key,
                                "c":valueList(item)
                            })
                        }
                        // 初始化二级联动
                        $("#city").citySelect({
                            data:{
                                "citylist":citylist
                            },
                            prov:"",
                            city:"",
                            dist:"",
                            nodata:"none"
                        });

                        // 初始化购物车
                        if ($.cookie('cartList') !== undefined && $.cookie('cartList') != '' && $.cookie('cartList') != 'null') {
                            var data = JSON.parse($.cookie('cartList'))
                            cookieCartList = data
                            oldCookieCartList = data
                            initCart(data)
                        }
                    },
                    error : function(err) {
                        showMessage("系统正在升级，请稍后重试");
                        console.log(err);
                    }
                });

            }
            function bindEvent() {
                // 价格筛选
                $('#priceOrderBtn').on('click', function() {
                    var spanClass = $(this).children('span');
                    if (spanClass.attr('class') === 'am-icon-sort-alpha-desc') {
                        spanClass.attr('class', 'am-icon-sort-alpha-asc')
                    } else {
                        spanClass.attr('class', 'am-icon-sort-alpha-desc')
                    }
                });
                // 销量筛选
                $('#salesOrderBtn').on('click', function() {
                    var spanClass = $(this).children('span');
                    if (spanClass.attr('class') === 'am-icon-sort-amount-desc') {
                        spanClass.attr('class', 'am-icon-sort-amount-asc')
                    } else {
                        spanClass.attr('class', 'am-icon-sort-amount-desc')
                    }
                });

                // 购物车相关事件
                // 添加商品到购物车
                $('.cd-add-to-cart').on('click', function(event){
                    event.preventDefault();
                    addToCart($(this));
                });
                // 打开/关闭购物车
                cartTrigger.on('click', function(event){
                    event.preventDefault();
                    toggleCart();
                });
                // 单击图标关闭购物车
                cartWrapper.on('click', function(event){
                    if( $(event.target).is($(this)) ) toggleCart(true);
                });
                // 从购物车中删除一个商品
                cartList.on('click', '.delete-item', function(event){
                    event.preventDefault();
                    removeProduct($(event.target).parents('.product'));
                    removeCookie($('.delete-item').index(this), 1)
                });
                // 更新购物车中商品的数量
                cartList.on('change', 'select', function(event){
                    quickUpdateCart();
                });
                // 重新添加从购物车中删除的商品
                undo.on('click', 'a', function(event){
                    clearInterval(undoTimeoutId);
                    event.preventDefault();
                    cartList.find('.deleted').addClass('undo-deleted').one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(){
                        $(this).off('webkitAnimationEnd oanimationend msAnimationEnd animationend').removeClass('deleted undo-deleted').removeAttr('style');
                        quickUpdateCart();
                    });
                    undo.removeClass('visible');
                    // 存储删除前的购物车列表到cookie
                    $.cookie('cartList', JSON.stringify(oldCookieCartList), {expires: 1})
                });
                // 结算
                $('.settle-account').on('click', function() {
                    var list = new Array()
                    $.each(cookieCartList, function(index, item) {
                        list.push(item.id)
                    })

                    // 创建订单
                    $.ajax({
                        url : '/order/manager/create_order',
                        data : {
                            productIdList : JSON.stringify(list)
                        },
                        type : 'POST',
                        dataType:'json',
                        success : function(res) {
                            console.log(res)
                            if (res.success) {
                                var orderId = res.orderId
                                window.location.href = '/fe/productAccount.html?orderId=' + orderId
                            } else {
                                showMessage(res.msg);
                            }
                        },
                        error : function(err) {
                            showMessage("系统正在升级，请稍后重试");
                            console.log(err);
                        }
                    });
                })
                // 清空购物车
                $('#clearCart').on('click', function() {
                    // 清除购物车数据
                    cartList.html('')
                    // 删除cookie
                    $.cookie('cartList', null)
                    // 全局置为空
                    cookieCartList.length = 0
                    oldCookieCartList.length = 0
                    // 更新商品数量
                    quickUpdateCart()
                })
            }
            // 价格区间
            function moneyIntervalMenu(){
                $('body').centermenu({
                    animateIn:'fadeInDownBig-hastrans',
                    animateOut:'fadeOutDownBig-hastrans',
                    hasLineBorder:true,
                    duration:600,
                    source:['不限', '1-100','100-500','500-1000','1000-5000','5000元以上'],
                    liWidth:300,
                    liHeight:50,
                    click:function(ret){
                        $('#moneyIntervalBtn').html(ret.text);
                        showMessage(ret.text);
                    }
                });
            }
            function valueList(list) {
                var arr = []
                for(var i=0;i<list.length;i++){
                    arr.push({
                        'n':list[i].typeValue
                    })
                }
                return arr
            }

            // 购物车相关方法
            function toggleCart(bool) {
                var cartIsOpen = ( typeof bool === 'undefined' ) ? cartWrapper.hasClass('cart-open') : bool;

                if( cartIsOpen ) {
                    cartWrapper.removeClass('cart-open');
                    //reset undo
                    clearInterval(undoTimeoutId);
                    undo.removeClass('visible');
                    cartList.find('.deleted').remove();

                    setTimeout(function(){
                        cartBody.scrollTop(0);
                        //check if cart empty to hide it
                        if( Number(cartCount.find('li').eq(0).text()) == 0) cartWrapper.addClass('empty');
                    }, 500);
                } else {
                    cartWrapper.addClass('cart-open');
                }
            }
            function addToCart(trigger) {
                var cartIsEmpty = cartWrapper.hasClass('empty');
                //update cart product list
                addProduct(trigger);
                //update number of items
                updateCartCount(cartIsEmpty);
                //update total price
                updateCartTotal(trigger.data('price'), true);
                //show cart
                cartWrapper.removeClass('empty');
            }
            function addProduct(trigger) {
                var imgUrl = trigger.data('img');
                var productName = trigger.data('name')
                var productPrice = trigger.data('price')
                productId = productId + 1;
                var productAdded = $(getCartHtml(imgUrl, productName, productPrice));
                cartList.append(productAdded);

                var data = {
                    id : trigger.data('id'),
                    imgUrl : imgUrl,
                    productName : productName,
                    productPrice : productPrice
                }
                addCookie(data, 1)
            }
            function removeProduct(product) {
                clearInterval(undoTimeoutId);
                cartList.find('.deleted').remove();

                var topPosition = product.offset().top - cartBody.children('ul').offset().top ,
//                        productQuantity = Number(product.find('.quantity').find('select').val()),
                        productQuantity = 1,
                        productTotPrice = Number(product.find('.price').text().replace('$', '')) * productQuantity;

                product.css('top', topPosition+'px').addClass('deleted');

                //update items count + total price
                updateCartTotal(productTotPrice, false);
                updateCartCount(true, -productQuantity);
                undo.addClass('visible');

                //wait 8sec before completely remove the item
                undoTimeoutId = setTimeout(function(){
                    undo.removeClass('visible');
                    cartList.find('.deleted').remove();
                }, 8000);
            }
            function quickUpdateCart() {
                var quantity = 0;
                var price = 0;

                cartList.children('li:not(.deleted)').each(function(){
//                    var singleQuantity = Number($(this).find('select').val());
                    var singleQuantity = 1
                    quantity = quantity + singleQuantity;
                    price = price + singleQuantity*Number($(this).find('.price').text().replace('$', ''));
                });

                cartTotal.text(price.toFixed(2));
                cartCount.find('li').eq(0).text(quantity);
                cartCount.find('li').eq(1).text(quantity+1);
            }
            function updateCartCount(emptyCart, quantity) {
                if( typeof quantity === 'undefined' ) {
                    var actual = Number(cartCount.find('li').eq(0).text()) + 1;
                    var next = actual + 1;

                    if( emptyCart ) {
                        cartCount.find('li').eq(0).text(actual);
                        cartCount.find('li').eq(1).text(next);
                    } else {
                        cartCount.addClass('update-count');

                        setTimeout(function() {
                            cartCount.find('li').eq(0).text(actual);
                        }, 150);

                        setTimeout(function() {
                            cartCount.removeClass('update-count');
                        }, 200);

                        setTimeout(function() {
                            cartCount.find('li').eq(1).text(next);
                        }, 230);
                    }
                } else {
                    var actual = Number(cartCount.find('li').eq(0).text()) + quantity;
                    var next = actual + 1;

                    cartCount.find('li').eq(0).text(actual);
                    cartCount.find('li').eq(1).text(next);
                }
            }
            function updateCartTotal(price, bool) {
                bool ? cartTotal.text( (Number(cartTotal.text()) + price).toFixed(2) )  : cartTotal.text( (Number(cartTotal.text()) - price).toFixed(2) );
            }
            function getCartHtml(imgUrl, productName, productPrice) {
                return '<li class="product">' +
                        '<div class="product-image">' +
                        '<a href="#0"><img class="imgUrl" src="' + imgUrl + '" alt="placeholder"></a>' +
                        '</div>' +
                        '<div class="product-details">' +
                        '<h3><a href="#0" class="name">' + productName + '</a></h3>' +
                        '<span class="price">' + productPrice + '</span>' +
                        '<div class="actions"><a href="#0" class="delete-item">Delete</a></div>' +
                        '</div>' +
                        '</li>'
            }
            // 初始化购物车
            function initCart(data) {
                $.each(data, function(index, item) {
                    cartList.append(getCartHtml(item.imgUrl, item.productName, item.productPrice))
                })
                cartWrapper.removeClass('empty')
                quickUpdateCart()
            }
            // 添加到cookie
            function addCookie(data, time) {
                if ($.cookie('cartList') !== undefined && $.cookie('cartList') != '' && $.cookie('cartList') != 'null') {
                    cookieCartList = JSON.parse($.cookie('cartList'))
                }
                cookieCartList.push(data)
                oldCookieCartList = cookieCartList
                $.cookie('cartList', JSON.stringify(cookieCartList), {expires: time})
            }
            // 从cookie中删除
            function removeCookie(index, time) {
                if ($.cookie('cartList') !== undefined && $.cookie('cartList') != '' && $.cookie('cartList') != 'null') {
                    cookieCartList = JSON.parse($.cookie('cartList'))
                }
                var list = new Array()
                for (var i = 0; i < cookieCartList.length; i++) {
                    if (i == index) {
                        continue
                    }
                    list.push(cookieCartList[i])
                }
                oldCookieCartList = cookieCartList
                cookieCartList = list
                $.cookie('cartList', JSON.stringify(list), {expires: time})
            }

            // 创建大类（与小类创建成二级联动）
            //            function firstCategoryMenu(){
            //                // 显示弹窗
            //                $('body').centermenu({
            //                    animateIn:'fadeInDownBig-hastrans',
            //                    animateOut:'fadeOutDownBig-hastrans',
            //                    hasLineBorder:true,
            //                    duration:600,
            //                    source:global.parentType,
            //                    liWidth:300,
            //                    liHeight:50,
            //                    click:function(ret){
            //                        $('#firstCategoryBtn').html(ret.text);
            //                        $('#secondCategoryBtn').html('所有');
            //                    }
            //                });
            //            }
            //            // 创建小类
            //            function scecondCategoryMenu(){
            //                $('body').centermenu({
            //                    animateIn:'fadeInDownBig-hastrans',
            //                    animateOut:'fadeOutDownBig-hastrans',
            //                    hasLineBorder:true,
            //                    duration:600,
            //                    source:['所有', '面膜','洗面奶','卸妆水','口红','补水仪','洁面仪'],
            //                    liWidth:300,
            //                    liHeight:50,
            //                    click:function(ret){
            //                        $('#secondCategoryBtn').html(ret.text);
            //                        showMessage(ret.text);
            //                    }
            //                });
            //            }

        </script>
    </body>
</html>