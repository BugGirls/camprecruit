(function($,undefined){if(!ace.vars["touch"]){return}var touchStartEvent="touchstart MSPointerDown pointerdown",touchStopEvent="touchend touchcancel MSPointerUp MSPointerCancel pointerup pointercancel",touchMoveEvent="touchmove MSPointerMove MSPointerHover pointermove";$.event.special.ace_drag={setup:function(){var min_threshold=0;var $this=$(this);$this.on(touchStartEvent,function(event){var data=event.originalEvent.touches?event.originalEvent.touches[0]:event,start={coords:[data.pageX,data.pageY],origin:$(event.target)},stop;var direction=false,dx=0,dy=0;function moveHandler(event){if(!start){return}var data=event.originalEvent.touches?event.originalEvent.touches[0]:event;stop={coords:[data.pageX,data.pageY]};if(start&&stop){dx=0;dy=0;direction=(Math.abs(dy=start.coords[1]-stop.coords[1])>min_threshold&&Math.abs(dx=start.coords[0]-stop.coords[0])<=Math.abs(dy))?(dy>0?"up":"down"):(Math.abs(dx=start.coords[0]-stop.coords[0])>min_threshold&&Math.abs(dy)<=Math.abs(dx))?(dx>0?"left":"right"):false;if(direction!==false){var retval={cancel:false};start.origin.trigger({"type":"ace_drag","direction":direction,"dx":dx,"dy":dy,"retval":retval});if(retval.cancel==false){event.preventDefault()}}}start.coords[0]=stop.coords[0];start.coords[1]=stop.coords[1]}$this.on(touchMoveEvent,moveHandler).one(touchStopEvent,function(event){$this.off(touchMoveEvent,moveHandler);start=stop=undefined})})}}})(window.jQuery);